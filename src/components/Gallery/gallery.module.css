/**
 * robotoskunk.com front client. The frontend part of robotoskunk.com
 * Copyright (C) 2025  Edgar Lima (RobotoSkunk)
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 * 
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
**/

.gallery {
	width: 100%;

	& .picture {
		display: inline-block;

		width: 50px;
		height: 50px;

		overflow: hidden;
	}
}


.fullscreen-gallery {
	--strip-height: 200px;
	--title-height: 50px;
	--gallery-background: #000000aa;

	position: fixed;
	top: 0;
	left: 0;

	width: 100%;
	height: 100%;

	background: var(--gallery-background);
	backdrop-filter: blur(5px);

	z-index: 100;

	& img {
		user-select: none;
	}

	& .close {
		display: flex;
		align-items: center;
		justify-content: center;

		position: absolute;
		top: 15px;
		left: 15px;

		width: 35px;
		height: 35px;

		padding: 0;
		margin: 0;

		z-index: 5;

		background-color: white;
		border-color: white;
		color: black;
	}

	& .title {
		display: flex;
		align-items: center;
		justify-content: center;

		position: absolute;
		top: 0;
		left: 0;
		right: 0;

		height: var(--title-height);
		font-size: 1.5em;

		color: white;
		background: linear-gradient(var(--gallery-background), transparent);
		box-shadow: 0 -26px 0 25px var(--gallery-background);

		z-index: 3;
		user-select: none;
	}

	& .visor {
		display: flex;
		align-items: center;
		justify-content: space-between;

		/* height: calc(100vh - var(--strip-height) - var(--title-height)); */
		height: 100%;

		z-index: 1;


		& > button {
			color: white;

			border: 0;
			border-radius: 0;

			height: 100%;

			margin: 0;
			padding: 0 25px;

			background: transparent;
			z-index: 2;

			&::after {
				display: none;
			}
		}

		& .picture-container {
			display: flex;
			align-items: center;
			justify-content: center;

			position: absolute;
			height: 100%;
			width: 100%;

			margin: 0 auto;

			& img {
				position: absolute;

				max-height: calc(100% - 25px);
				max-width: calc(100% - 25px);

				object-fit: contain;
			}
		}
	}

	& .scroller {
		display: flex;
		justify-content: center;

		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;

		height: var(--strip-height);
		z-index: 3;

		background: linear-gradient(transparent, var(--gallery-background));
		box-shadow: 0 26px 0 25px var(--gallery-background);

		& .borders {
			display: flex;
			justify-content: space-between;

			position: absolute;
			top: -75px;
			bottom: -25px;
			width: 100%;

			pointer-events: none;

			& > div {
				height: 100%;
				width: 240px;

				mask-image: unset !important;
				mask-image: radial-gradient(at left bottom, black 40%, transparent 65%) !important;

				&:last-child {
					mask-image: radial-gradient(at right bottom, black 40%, transparent 65%) !important;
				}
			}
		}

		& .strip {
			display: inline-flex;
			align-items: center;
			justify-content: center;

			height: 100%;
			padding: 0 200px;

			&.dragging {
				cursor: grabbing;
			}

			& button {
				display: inline-block;

				width: 100px;
				height: 150px;

				border: 0;
				border-radius: 10px;

				background: transparent;
				flex-shrink: 0;

				transition: width 0.2s ease-in-out;

				& img {
					object-fit: cover;

					filter: brightness(1) blur(0);

					transition-property: scale, filter;
					transition-duration: 0.3s;
					transition-timing-function: ease-in-out;
				}

				&::after {
					display: none;
				}

				&.dragging {
					cursor: grabbing;
				}

				&:not(.dragging):hover,
				&:not(.dragging):focus-visible,
				&.selected {
					width: 150px;

					& img {
						scale: 1.2;
					}
				}

				&.selected img {
					scale: 1.6;

					filter: brightness(0.5) blur(3px);
				}
			}
		}
	}
}

body[device-type=mobile] .fullscreen-gallery,
body[device-type=tablet] .fullscreen-gallery {
	backdrop-filter: unset;
	background-color: #000000dd;
}

body[device-type=mobile] .fullscreen-gallery .scroller button.selected img,
body[device-type=tablet] .fullscreen-gallery .scroller button.selected img {
	filter: brightness(0.25) blur(0px);
}
